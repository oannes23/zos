{% if images %}
<div class="media-grid">
{% for img in images %}
    <div class="media-card clickable"
         hx-get="/ui/media/images/{{ img.id }}"
         hx-target="#image-detail-modal"
         hx-swap="innerHTML">
        {% if img.local_path %}
        <div class="media-thumb">
            <img src="/media/files/{{ img.local_path }}" alt="{{ img.filename or 'image' }}" loading="lazy">
        </div>
        {% else %}
        <div class="media-thumb media-thumb-placeholder">No image</div>
        {% endif %}
        <div class="media-card-info">
            <span class="badge badge-info">{{ img.media_type }}</span>
            {% if img.filename %}<span class="text-muted ml-1">{{ img.filename | truncate(20) }}</span>{% endif %}
            <p class="media-desc">{{ img.description | truncate(100) if img.description else "No description" }}</p>
        </div>
    </div>
{% endfor %}
</div>
<div id="image-detail-modal" class="modal"></div>

<div class="pagination mt-1">
    {% if offset > 0 %}
    <button hx-get="/ui/media/images?offset={{ offset - limit }}&limit={{ limit }}"
            hx-target="#images-list"
            hx-swap="innerHTML">
        Previous
    </button>
    {% endif %}

    <span class="page-info">{{ offset + 1 }}&ndash;{{ [offset + limit, total] | min }} of {{ total | format_number }}</span>

    {% if offset + limit < total %}
    <button hx-get="/ui/media/images?offset={{ offset + limit }}&limit={{ limit }}"
            hx-target="#images-list"
            hx-swap="innerHTML">
        Next
    </button>
    {% endif %}
</div>
{% else %}
<p class="text-muted">No image analyses yet</p>
{% endif %}
