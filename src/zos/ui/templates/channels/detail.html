{% extends "base.html" %}
{% block title %}#{{ channel.name }} â€” Zos{% endblock %}

{% block content %}
<div class="page-header">
    <a href="/ui/channels" class="back-link">&larr; All Channels</a>
    <h1>#{{ channel.name }}</h1>
    {% if channel.server_name %}
    <p class="text-muted">{{ channel.server_name }}</p>
    {% endif %}
</div>

<div class="detail-grid">
    <div class="detail-main">
        <!-- Channel Stats -->
        <div class="card mb-2">
            <div class="card-header">
                <span class="card-title">Overview</span>
            </div>
            <div class="card-body stats-grid">
                <div class="stat">
                    <span class="stat-value">{{ channel.message_count | format_number }}</span>
                    <span class="stat-label">Messages</span>
                </div>
                <div class="stat">
                    <span class="stat-value">{{ channel.author_count | format_number }}</span>
                    <span class="stat-label">Active Users</span>
                </div>
                {% if channel.type %}
                <div class="stat">
                    <span class="stat-label">Type</span>
                    <span class="stat-value small">{{ channel.type }}</span>
                </div>
                {% endif %}
                {% if channel.created_at %}
                <div class="stat">
                    <span class="stat-label">Created</span>
                    <span class="stat-value small">{{ channel.created_at | relative_time }}</span>
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Insights related to this channel -->
        <div class="card mb-2">
            <div class="card-header">
                <span class="card-title">Related Insights</span>
            </div>
            <div hx-get="/ui/channels/{{ channel.channel_id }}/insights" hx-trigger="load" hx-swap="innerHTML">
                Loading insights...
            </div>
        </div>

        <!-- Recent Messages -->
        <div class="card mb-2">
            <div class="card-header">
                <span class="card-title">Recent Messages</span>
                <a href="/ui/messages?channel_id={{ channel.channel_id }}" class="text-muted">View all</a>
            </div>
            <div hx-get="/ui/channels/{{ channel.channel_id }}/messages" hx-trigger="load" hx-swap="innerHTML">
                Loading messages...
            </div>
        </div>
    </div>

    <div class="detail-sidebar">
        <!-- Top Users -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">Top Users</span>
            </div>
            <div hx-get="/ui/channels/{{ channel.channel_id }}/top-users" hx-trigger="load" hx-swap="innerHTML">
                Loading users...
            </div>
        </div>
    </div>
</div>
{% endblock %}
